var currentCardOption;var cardOptionsJSON;var currentCardType;var currentCardPan="";var cardTypeOption;var infoTemplateMsg;var monthsArray=monthsCommaSeparetedList.split(",");var isIEBrowser=isIE();var isConfirmTokenPanelUsed;var isTokenEditPanelUsed;function isIE(){var a=navigator.userAgent.toLowerCase();return(a.indexOf("msie")!=-1)?parseInt(a.split("msie")[1]):false}function existFunction(name){return(eval("typeof "+name)=="function")?true:false}function applyHtml5Enhancement(){if(!isIEBrowser){if(mobileCssEnabled){$("#cardNumber").prop("type","tel");if(cscEnabled){$("#csc").prop("type","tel")}if(issueEnabled){$("#issue").prop("type","tel")}}$("#cardNumber").prop("placeholder",cardNumberPlaceholder);if(cardholderNameEnabled){$("#cardholderName").prop("placeholder",cardholderNamePlaceholder)}}}function hideTooltips(){$("div.tooltip").hide()}function applyToolTips(){$("input[type='text'].formInput, input[type='tel'].formInput, select.formInput, input[type='checkbox'].formInput").each(function(){$(this).focus(function(){hideTooltips();$("#"+$(this).prop("id")+"ToolTip").show()})});$("input[type='checkbox'].formInput").each(function(){$(this).click(function(){hideTooltips();$("#"+$(this).prop("id")+"ToolTip").show()})})}function openWindow(d,b,c,a){window.open(b,"_blank","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=yes, width="+c+", height="+a);d.preventDefault()}function applyFooterLinks(){$("#vbvAcceptanceMarkLink").click(function(a){openWindow(a,$(this).prop("href"),600,550)});$("#mcAcceptanceMarkLink").click(function(a){openWindow(a,$(this).prop("href"),600,550)});$("#amexAcceptanceMarkLink").click(function(a){openWindow(a,$(this).prop("href"),600,550)});$("#jcbAcceptanceMarkLink").click(function(a){openWindow(a,$(this).prop("href"),600,550)});$("#paypalAcceptanceMarkLink").click(function(a){openWindow(a,$(this).prop("href"),400,550)})}function applyAnalytics(){if($("#analyticsPanel").length!=0){populateAnalyticsData("cardEntryPageLoaded")}}function applyEvents(){$("#cscDescLink, #confirmCscDescLink").click(function(a){$("#closeCSCIconImg").prop("src",closeIcon);$("#cscImage").prop("src",cscImage);a.preventDefault();$("form :input").prop("disabled",true);$("#overlay").height($(document).height());$("#overlay").show();$("#cscDialog").show();$("#closeCSCIcon").focus()});$("#closeCSCIcon, #closeCSCDesc").click(function(){$("#cscDialog").hide();$("#overlay").hide();$("form :input").prop("disabled",false);if(cardTokenUsed){$("#cardNumber").prop("disabled",true)}if(confirmCheck1Disabled){$("#confirmCheck1").prop("disabled",true)}if(confirmCheck2Disabled){$("#confirmCheck1").prop("disabled",true)}return false});$("#cardPaymentLink").click(function(){return false});$("#payPalLink, #masterPassLink, #idealLink, #giroPayLink, #sofortLink, #misterCashLink").click(function(){hideCardEntryPanel();return false});$("#btnSubmit, #completeReferral").click(function(a){$("form :input").prop("readonly",true);$(".cancelButton").prop("disabled",true);$("#overlay").height($(document).height());$("#overlay").show();$("#waitPanel").show()});$(":radio").click(function(){if($("input[name='paymentMethod']:checked").val()=="CARD"){$("#paymentDetailsPanel").slideDown("slow")}else{$("#paymentDetailsPanel").slideUp("slow")}})}function applyPanels(){if(displayManualAuthPanel){$("#completeCancelPanel").show()}if(showPayerAuthPostPanel){$("#payerAuthPostPanel").show()}if(paymentMethodsAvailable){$("#paymentMethodPanel").show()}if(paymentMethodsAvailable&&$("input[name='paymentMethod']:checked").val()!="CARD"){$("#paymentDetailsPanel").hide()}}function applySanitize(){$("input[type='text'].formInput, input[type='tel'].formInput").each(function(){$(this).blur(function(){this.value=$.trim(this.value)})})}function applyInitialization(){$("#jsEnabled").val("true");if(!isMobile){if($("#"+focusField).length==1){$("#"+focusField).focus()}}isConfirmTokenPanelUsed=$("#confirmPaymentDetailsPanel").length>0;isTokenEditPanelUsed=$("#cardNumber").is(":disabled");if(cardTokenUsed&&(isConfirmTokenPanelUsed||isTokenEditPanelUsed)){currentCardType=tokenCardType}else{currentCardType=($("#cardType").length>0&&$("#cardType").prop("value")!="")?$("#cardType").prop("value"):"default"}if($("#cardType").length>0||tokenCardType.length>0){infoTemplateMsg=$("#infoMessage").text().replace("{0}","<span>{0}</span>");$("#infoMessagePanel").hide();$("#purchaseDetailsSurchargeAmount").hide();$("#purchaseDetailsTotalAmount").hide();$("#basketSurchargeAmountPanel").hide();$("#basketTotalAmountPanel").hide()}if(isTokenEditPanelUsed&&tokenCardType.length>0){$("#cardTypeSection").hide()}}function logToConsole(a){if(window.console&&window.console.log){console.log(a)}}$(function(){applyInitialization();applyHtml5Enhancement();applySanitize();applyToolTips();applyEvents();applyPanels();applyFooterLinks();applyAnalytics()});